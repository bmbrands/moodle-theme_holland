define("theme_holland/featurecourse",["exports","core/ajax","core/notification","core/templates"],function(_exports,_ajax,_notification,_templates){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
/**
   * Feature course toggle button.
   *
   * @module     theme_holland/featurecourse
   * @copyright  2026 Bas Brands <bas@sonsbeekmedia.nl>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);class FavouriteCourse{constructor(courseid,rootElement){this.courseid=courseid,this.rootElement=rootElement,this.isfavourite=!1,this.hasAccess=!1,this.waiting=!1}init(){document.body.classList.contains("path-course-view")&&document.body.classList.contains("pagelayout-course")&&(this.courseHeader=this.rootElement.querySelector("#page-header-title"),this.buttonContainer=document.createElement("div"),this.buttonContainer.classList.add("d-inline-block","ml-4"),this.courseHeader.parentNode.insertBefore(this.buttonContainer,this.courseHeader.nextSibling),this.render(),this.addEventListeners())}async render(){this.buttonFeatured=await _templates.default.render("theme_holland/theme/featurebutton",{featured:!0,featuring:!1}).then(html=>html).catch(_notification.default.exception),this.buttonDefault=await _templates.default.render("theme_holland/theme/featurebutton",{featured:!1,featuring:!1}).then(html=>html).catch(_notification.default.exception),this.buttonWaiting=await _templates.default.render("theme_holland/theme/featurebutton",{featured:!1,featuring:!0}).then(html=>html).catch(_notification.default.exception),await this.favouriteCourse()}async renderFeatureButton(){this.hasAccess&&(this.waiting?this.buttonContainer.innerHTML=this.buttonWaiting:this.isfavourite?this.buttonContainer.innerHTML=this.buttonFeatured:this.buttonContainer.innerHTML=this.buttonDefault)}async addEventListeners(){this.rootElement.addEventListener("click",async event=>{event.target.closest(".btn-feature")&&this.favouriteCourse()})}favouriteCourse(){this.waiting=!0,this.renderFeatureButton();const data={courseid:this.courseid,togglestate:this.hasAccess};return _ajax.default.call([{methodname:"theme_holland_favourite_course",args:data}])[0].done(response=>(this.isfavourite=response.isfavourite,this.hasAccess=response.hasaccess,this.waiting=!1,this.renderFeatureButton(),"")).catch(_notification.default.exception)}}_exports.default={init:courseid=>{const rootElement=document.querySelector("#page-header");new FavouriteCourse(courseid,rootElement).init()}};return _exports.default});

//# sourceMappingURL=featurecourse.min.js.map